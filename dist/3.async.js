(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"STA+":function(e,t,a){"use strict";a.r(t);a("OaEy");var s,i,n,r,o=a("2fM7"),h=a("q1tI"),c=a.n(h),l=a("3a4m"),m=a.n(l),p=a("Aeqt"),d=a("/MKj"),u=a("SeWN"),g=a("ITHA"),y=a("PqTD"),T=a("yYYQ"),I=a("LzsQ"),N=a("Bn73"),E=a("KExl"),D=(a("AuZ3"),o["a"].Option),v="home",O=(s=Object(d["c"])(e=>{var t=e.home,a=e.loading;return{home:t,loading:a}}),s((n=class extends h["Component"]{constructor(e){super(e),this.onKeyDown=(e=>{switch(e.keyCode){case 37:break;case 38:break;case 39:m.a.push("/list");break;case 40:m.a.push("/list");break;default:return!1}}),this.getSelectData=(()=>{this.props.dispatch({type:"".concat(v,"/selectList")})}),this.getLargeClassData=(()=>{this.props.dispatch({type:"".concat(v,"/largeClassList")})}),this.getCustomerTypeData=(()=>{this.props.dispatch({type:"".concat(v,"/customerList"),payload:{customerBigTypeId:this.state.customerBigTypeId,highOrganId:this.state.highOrganId}})}),this.getNameOrganData=(()=>{this.props.dispatch({type:"".concat(v,"/nameOrganList"),payload:{customerBigTypeId:this.state.customerBigTypeId,customerTypeId:this.state.customerTypeId}})}),this.getlistData=(e=>{this.props.dispatch({type:"".concat(v,"/list"),payload:e})}),this.getTotalData=(e=>{this.props.dispatch({type:"".concat(v,"/total"),payload:e})}),this.postOutData=(e=>{this.props.dispatch({type:"".concat(v,"/outList"),payload:e})}),this.postAnnualData=(e=>{this.props.dispatch({type:"".concat(v,"/annualList"),payload:e})}),this.postDemandTask=(e=>{this.props.dispatch({type:"".concat(v,"/demandList"),payload:e})}),this.postMapData=(e=>{this.props.dispatch({type:"".concat(v,"/mapList"),payload:e})}),this.postMapPointData=(e=>{this.props.dispatch({type:"".concat(v,"/mapPoint"),payload:e})}),this.getApi=(()=>{var e={customerBigTypeId:this.state.customerBigTypeId,customerTypeId:this.state.customerTypeId,highOrganId:this.state.highOrganId};this.getlistData(e),this.getTotalData(e),this.postOutData(e),this.postAnnualData(e),this.postDemandTask(e),this.postMapData(e)}),this.postApi=(()=>{var e={customerBigTypeId:this.state.customerBigTypeId,customerTypeId:this.state.customerTypeId,highOrganId:this.state.highOrganId,dataType:this.state.dataType,dataId:this.state.dataId};this.getTotalData(e),this.postOutData(e),this.postAnnualData(e),this.postDemandTask(e),this.postMapData(e)}),this.handleSelectLargeClass=((e,t)=>{this.setState({customerBigTypeId:e,customerTypeId:"0000",highOrganId:"0000",customerBigTypeValue:t,customerTypeValue:"\u5168\u90e8",highOrganValue:"\u5168\u90e8",listName:"",dataId:"",currentIndex:null,isLoading:!0}),setTimeout(()=>{this.getCustomerTypeData(),this.getNameOrganData(),this.getApi()},20),clearTimeout(r),r=setInterval(()=>{this.getApi(),this.setState({isLoading:!1})},this.state.rushTime)}),this.handleSelectCustomerType=((e,t)=>{this.setState({customerTypeId:e,customerTypeValue:t,currentIndex:null,listName:"",dataId:"",isLoading:!0}),setTimeout(()=>{this.props.dispatch({type:"".concat(v,"/nameOrganList"),payload:{customerBigTypeId:this.state.customerBigTypeId,customerTypeId:this.state.customerTypeId}}).then(e=>{if(200===e.code){if("\u5168\u90e8"!==this.state.highOrganValue||""!==this.state.highOrganValue){var t=!1;this.props.home.NameOrganData.find(e=>{return e.value===this.state.highOrganValue&&(t=!0),!1}),!1===t&&this.setState({highOrganValue:"\u5168\u90e8",highOrganId:"0000"})}this.getApi()}})},20),clearTimeout(r),r=setInterval(()=>{this.getApi(),this.setState({isLoading:!1})},this.state.rushTime)}),this.handleSelectNameOrgan=((e,t)=>{this.setState({highOrganId:e,highOrganValue:t,listName:"",dataId:"",currentIndex:null,isLoading:!0}),setTimeout(()=>{this.props.dispatch({type:"".concat(v,"/customerList"),payload:{customerBigTypeId:this.state.customerBigTypeId,highOrganId:e}}).then(e=>{if(200===e.code){if("\u5168\u90e8"!==this.state.customerTypeValue||""!==this.state.customerTypeValue){var t=!1;this.props.home.CustomerTypeData.find(e=>{return e.value===this.state.customerTypeValue&&(t=!0),!1}),!1===t&&this.setState({customerTypeValue:"\u5168\u90e8",customerTypeId:"0000"})}this.getApi()}})},20),clearTimeout(r),r=setInterval(()=>{this.getApi(),this.setState({isLoading:!1})},this.state.rushTime)}),this.handleListType=((e,t,a,s,i)=>{this.setState({dataId:e,listName:t,dataType:a,isLoading:!0,userNum:s,serverNum:i,currentIndex:0}),setTimeout(()=>{var t={customerBigTypeId:this.state.customerBigTypeId,customerTypeId:this.state.customerTypeId,highOrganId:e};this.postMapPointData(t),this.postApi()},20),clearTimeout(r),r=setInterval(()=>{this.postApi(),this.setState({isLoading:!1})},this.state.rushTime)}),this.handleClick=(()=>{this.setState({currentIndex:null}),""!==this.state.listName&&(this.setState({listName:"",dataId:""}),setTimeout(()=>{this.postApi()},20)),clearTimeout(r),r=setInterval(()=>{this.getApi(),this.setState({isLoading:!1})},this.state.rushTime)}),this.handleOpenWin=((e,t)=>{var a="&DL="+this.state.customerBigTypeId+"&LX="+this.state.customerTypeId+"&ZQ="+this.state.highOrganId,s="";s=t?"&CZQ="+("highOrgan"===this.props.home.dataType?t:"")+"&CKH="+("customer"===this.props.home.dataType?t:""):"&CZQ=&CKH=";var i=p["a"].site+this.urlEncode(e).substr(1)+a+s,n="height=500,width=1000,top=100,left=100,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no";window.open(i,"",n)}),this.urlEncode=((e,t,a)=>{if(null==e)return"";var s="",i=typeof e;if("string"===i||"number"===i||"boolean"===i)s+="&"+t+"="+(null==a||a?encodeURIComponent(e):e);else for(var n in e){var r=null==t?n:t+(e instanceof Array?"["+n+"]":"."+n);s+=this.urlEncode(e[n],r,a)}return s}),this.typeChange=(e=>{this.setState({selectType:e});var t={customerBigTypeId:this.state.customerBigTypeId,customerTypeId:this.state.customerTypeId,highOrganId:this.state.highOrganId};this.postMapData(t)}),this.renderFooter=((e,t)=>{return"\u519b\u7528"===e?c.a.createElement(o["a"],{defaultValue:"\u7528\u6237\u4e0e\u6218\u533a/\u519b\u533a",onChange:this.typeChange},c.a.createElement(D,{key:"1",value:1},"\u7528\u6237\u4e0e\u6218\u533a/\u519b\u533a"),c.a.createElement(D,{key:"2",value:2},"\u670d\u52a1\u7ec4")):c.a.createElement(o["a"],{defaultValue:"\u7528\u6237",onChange:this.typeChange},c.a.createElement(D,{key:"1",value:1},"\u7528\u6237"),c.a.createElement(D,{key:"2",value:2},"\u670d\u52a1\u7ec4"))}),this.state={dataType:"",currentIndex:null,dataId:0,customerBigTypeId:"1",customerTypeId:"0000",highOrganId:"0000",customerBigTypeValue:"\u519b\u7528",customerTypeValue:"\u5168\u90e8",highOrganValue:"\u5168\u90e8",listName:"",isLoading:!0,rushTime:72e5,selectType:1,userNum:0,serverNum:0}}componentDidMount(){document.title="\u670d\u52a1\u4fdd\u969c\u7ba1\u63a7\u7cfb\u7edf",this.getLargeClassData(),this.getCustomerTypeData(),this.getNameOrganData(),this.getApi(),r=setInterval(()=>{this.getApi(),this.setState({isLoading:!1})},this.state.rushTime),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("click",e=>{e.path&&e.path.findIndex(e=>{return"sider-layout-title"===e.className})>-1&&this.handleClick()})}componentWillUnmount(){clearTimeout(r),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("click",this.handleClick)}render(){var e=this.props,t=e.home,a=e.loading,s=t.LargeClassData,i=t.CustomerTypeData,n=t.NameOrganData,r=t.listData,o=t.totalData,h=t.outData,l=t.annualData,m=t.demandData,p=t.mapData,d=t.dataType,D=t.mapPointData,v=this.state,O=v.customerBigTypeId,f=v.customerTypeId,L=v.currentIndex,C=v.userNum,B=v.serverNum,S=v.highOrganId,k=v.customerBigTypeValue,A=v.highOrganValue,V=v.isLoading,w=v.selectType,b=v.listName;return c.a.createElement("div",{className:"layout-wrapper home"},c.a.createElement("div",{className:"sider-wrapper"},c.a.createElement("div",{className:"content"},c.a.createElement("header",{className:"header"},c.a.createElement(u["a"],{customerBigTypeId:O,customerTypeId:f,highOrganId:S,selectLargeClass:this.handleSelectLargeClass,selectNameOrgan:this.handleSelectNameOrgan,selectCustomerType:this.handleSelectCustomerType,LargeClassData:s,CustomerTypeData:i,NameOrganData:n})),c.a.createElement("main",{className:"main"},c.a.createElement(g["a"],{highOrganId:S,loading:!!V&&a.effects["home/list"],listData:r,dataType:d,currentIndex:L,selectListType:this.handleListType,openWin:this.handleOpenWin})))),c.a.createElement("main",{className:"main-wrapper"},c.a.createElement("div",{className:"list-click"}),c.a.createElement("div",{className:"map-box"},c.a.createElement(y["a"],{highOrganId:S,customerBigTypeValue:k,highOrganValue:A,loading:!!V&&a.effects["home/mapList"],mapData:p,currentIndex:L,listName:b,userNum:C,serverNum:B,selectType:w,mapPointData:D,openWin:this.handleOpenWin}),c.a.createElement("div",{className:"footer"},this.renderFooter(k,S)))),c.a.createElement("div",{className:"asider-wrapper"},c.a.createElement("div",{className:"info-box"},c.a.createElement("div",{className:"asider-srcoll"},c.a.createElement("div",{className:"info-col"},c.a.createElement("div",{className:"info-content"},c.a.createElement("header",{className:"header"},c.a.createElement("i",{className:"icon iconfont icon-chanpin"}),c.a.createElement("h3",{className:"title"},"\u673a\u7fa4\u72b6\u6001\u7edf\u8ba1")),c.a.createElement("main",{className:"main"},c.a.createElement(T["a"],{loading:!!V&&a.effects["home/total"],chartsData:o,openWin:this.handleOpenWin})))),c.a.createElement("div",{className:"info-col"},c.a.createElement("div",{className:"info-content"},c.a.createElement("header",{className:"header"},c.a.createElement("i",{className:"icon iconfont icon-chanpin"}),c.a.createElement("h3",{className:"title"},"\u5ba2\u6237\u9700\u6c42\u4efb\u52a1\u76d1\u63a7")),c.a.createElement("main",{className:"main"},c.a.createElement(E["a"],{loading:!!V&&a.effects["home/demandList"],chartsData:m,openWin:this.handleOpenWin})))),c.a.createElement("div",{className:"info-col"},c.a.createElement("div",{className:"info-content"},c.a.createElement("header",{className:"header"},c.a.createElement("i",{className:"icon iconfont icon-feijichang"}),c.a.createElement("h3",{className:"title"},"\u5916\u573a\u6545\u969c\u4fe1\u606f")),c.a.createElement("main",{className:"main"},c.a.createElement(I["a"],{loading:!!V&&a.effects["home/outList"],chartsData:h,openWin:this.handleOpenWin})))),c.a.createElement("div",{className:"info-col"},c.a.createElement("div",{className:"info-content"},c.a.createElement("header",{className:"header"},c.a.createElement("i",{className:"icon iconfont icon-xiuli"}),c.a.createElement("h3",{className:"title"},"\u4ea4\u4ed8\u4fe1\u606f")),c.a.createElement("main",{className:"main"},c.a.createElement(N["a"],{loading:!!V&&a.effects["home/annualList"],chartsData:l,openWin:this.handleOpenWin}))))))))}},i=n))||i);t["default"]=O}}]);